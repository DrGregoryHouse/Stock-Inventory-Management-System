"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n){function i(){var e=t.createElement("div");e.className="ac__container",e.style.width=this._input.offsetWidth,e.style.position="relative",this._input.parentNode.insertBefore(e,this._input.nextSibling);var n=t.createElement("div");n.className="ac__inner",n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="100%",e.appendChild(n),this._container=n}function o(e){return e.firstChild.innerHTML+e.lastChild.textContent}function r(){var e=this;this._container.addEventListener("click",function(t){t.target!==t.currentTarget&&e._onSelectedCB(o(t.target)),t.stopPropagation()})}function c(){for(;this._container.firstChild;)this._container.removeChild(this._container.firstChild)}function a(e,t){var n=!0;return function(){var i=arguments;n&&(n=!1,setTimeout(function(){e.apply(null,Array.prototype.slice.apply(i)),n=!0},t))}}function l(e){null!=e&&(e.className=e.className.split(" ").filter(function(e){return!/ac__word--selected/.test(e)}).join(" "))}function s(e){var t=e.keyCode||e.which,n=String.fromCharCode(t);if(13==t)this._onSelectedCB(this._input.value);else if(/[a-zA-Z0-9-_ ]/.test(n)||8===t){var i=this._input.value;""!=i&&this._keyListenerDebounced(i)}}function d(e){var t=e.keyCode||e.which,n=String.fromCharCode(t),i=this;if(38===t)i._idx>0&&(l(i._words[i._idx]),i._idx--),i._words[i._idx].className+=" ac__word--selected";else if(40==t)i._idx<i._words.length-1&&(l(i._words[i._idx]),i._idx++),i._words[i._idx].className+=" ac__word--selected";else if(13==t)i._words.length&&i._idx>-1?i._onSelectedCB(o(i._words[i._idx])):i._onSelectedCB(i._input.value);else if(/[a-zA-Z0-9-_ ]/.test(n)||8===t){i._idx=-1;var r=i._input.value;""!=r?i._keyListenerDebounced(r):c.call(i)}}function _(){var e=t.getElementById("ac__script");null==e&&(e=t.createElement("div"),e.id="ac__script",e.appendChild(t.createElement("script")),t.body.appendChild(e))}function u(e,n){c.call(this),this._words=[];for(var i=t.createDocumentFragment(),o=0;o<n.length;o++){var r=t.createElement("p");r.className="ac__word",r.style.cursor="pointer";var a=t.createElement("span");a.className="ac__prefix",a.style.pointerEvents="none";var l=t.createTextNode(n[o].slice(e.length));a.appendChild(t.createTextNode(e)),r.appendChild(a),r.appendChild(l),i.appendChild(r),this._words.push(r)}this._container.appendChild(i)}function p(e){var n=t.getElementById("ac__script"),i=t.createElement("script");i.src="http://completion.amazon.com/search/complete?search-alias=aps&client=amazon-search-ui&mkt=1&q="+e+"&callback=AmazonAutocomplete.AmazonJSONPCallbackHandler_"+this._id,n.replaceChild(i,n.firstChild)}var f=0;e.AmazonAutocomplete=function(){f++;var n=this;n._id=f,n._input,n._idx,n._words,n._container,n._onSelectedCB=function(){},n._config={delay:150,showWords:!0,hideOnblur:!0};var o=arguments[0];o&&"string"==typeof o?n._config.selector=o:o&&"object"===("undefined"==typeof o?"undefined":_typeof(o))&&Object.keys(o).forEach(function(e){n._config[e]=o[e]}),n._words=[],n._idx=-1,n._keyListenerDebounced=a(p.bind(n),n._config.delay),n._input=t.querySelector(n._config.selector),null!=n._input&&(n._input.setAttribute("autocomplete","off"),_(),n._config.showWords?(n._input.addEventListener("keyup",d.bind(n),!1),i.call(n),r.call(n)):n._input.addEventListener("keyup",s.bind(n),!1)),n._config.hideOnblur&&n._container.parentNode.classList.add("ac__container--hide-on-blur"),n._input.addEventListener("click",function(e){n._container.parentNode.style.display="block",e.amazonAutocompleteClicked=!0}),e.AmazonAutocomplete["AmazonJSONPCallbackHandler_"+n._id]=function(e){n._config.showWords&&u.call(n,e[0],e[1]),null!=n._onWordsCB&&n._onWordsCB(e[1])}},t.body.addEventListener("click",function(e){e.amazonAutocompleteClicked||t.querySelectorAll(".ac__container--hide-on-blur").forEach(function(e){return e.style.display="none"})}),AmazonAutocomplete.prototype.onSelectedWord=function(e){this._onSelectedCB=e},AmazonAutocomplete.prototype.onNewWords=function(e){this._onWordsCB=e}}(window,document);